# EnMapper Environment Configuration Template
# Copy this file to .env and fill in your actual values
# Phase 0: Environment setup for all services

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME=EnMapper
APP_VERSION=1.0.0
ENVIRONMENT=development  # development | staging | production
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# LLM PROVIDER CONFIGURATIONS
# =============================================================================

# OpenAI (Primary Provider)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=org-your-organization-id-here
OPENAI_DEFAULT_MODEL=gpt-4-turbo

# Anthropic (Secondary Provider)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_DEFAULT_MODEL=claude-3-sonnet

# Groq (Fast/Cost-Effective Provider)
GROQ_API_KEY=gsk_your-groq-api-key-here
GROQ_DEFAULT_MODEL=mixtral-8x7b

# Ollama (Local Models)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_DEFAULT_MODEL=llama2

# LangSmith (Observability)
LANGSMITH_API_KEY=lsv2_your-langsmith-api-key-here
LANGSMITH_TRACING=true
LANGSMITH_PROJECT=enmapper-dev

# =============================================================================
# DATABASE CONFIGURATIONS
# =============================================================================

# PostgreSQL + PGVector
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=enmapper
POSTGRES_USER=enmapper_user
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_SSLMODE=prefer
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Vector Database Settings
PGVECTOR_ENABLED=true
VECTOR_DIMENSION=1536  # OpenAI embedding dimension

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DB=0
REDIS_SSL=false
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Cache TTL Settings (seconds)
CACHE_TTL_EMBEDDINGS=3600      # 1 hour
CACHE_TTL_COMPLETIONS=1800     # 30 minutes
CACHE_TTL_IDEMPOTENCY=86400    # 24 hours

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT Settings
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=480  # 8 hours
JWT_REFRESH_EXPIRATION_DAYS=30

# API Keys for Service Authentication
API_KEY_SALT=your-api-key-salt-here
ADMIN_API_KEY=admin-your-secure-admin-key-here

# PII Protection
PII_HASH_SALT=your-pii-hashing-salt-here
PII_ENCRYPTION_KEY=your-32-byte-encryption-key-here

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================

# Sentry (Error Tracking)
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/project-id
SENTRY_ENVIRONMENT=${ENVIRONMENT}
SENTRY_SAMPLE_RATE=0.1

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8090
METRICS_PREFIX=enmapper

# OpenTelemetry
OTEL_ENABLED=true
OTEL_SERVICE_NAME=enmapper-core
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_RESOURCE_ATTRIBUTES=service.name=${OTEL_SERVICE_NAME},service.version=${APP_VERSION}

# =============================================================================
# STORAGE & FILE SYSTEM
# =============================================================================

# Artifact Storage
STORAGE_BACKEND=local  # local | s3 | gcs | azure
STORAGE_ROOT_PATH=./storage
STORAGE_MAX_SIZE_GB=100

# S3 Configuration (if using S3)
AWS_ACCESS_KEY_ID=your-aws-access-key-here
AWS_SECRET_ACCESS_KEY=your-aws-secret-key-here
AWS_DEFAULT_REGION=us-east-1
S3_BUCKET_NAME=enmapper-artifacts
S3_PREFIX=dev/

# =============================================================================
# COST CONTROLS & BUDGETS
# =============================================================================

# Global Budget Limits (USD)
DAILY_BUDGET_LIMIT=1000.0
MONTHLY_BUDGET_LIMIT=20000.0
COST_ALERT_THRESHOLDS=500.0,800.0,950.0

# Per-User Budget Limits
USER_DAILY_BUDGET_ANALYST=100.0
USER_DAILY_BUDGET_ENGINEER=500.0
USER_MONTHLY_BUDGET_ANALYST=2000.0
USER_MONTHLY_BUDGET_ENGINEER=10000.0

# Cost Tracking
COST_TRACKING_ENABLED=true
COST_CURRENCY=USD

# =============================================================================
# OPERATIONAL SETTINGS
# =============================================================================

# Run Management
MAX_CONCURRENT_RUNS=10
DEFAULT_RUN_TIMEOUT_MINUTES=480  # 8 hours
CLEANUP_ORPHANED_RUNS_HOURS=24

# Resource Limits
MAX_MEMORY_GB=16
MAX_PROCESSING_CORES=8
MAX_STORAGE_PER_RUN_GB=10

# Retry and Backoff
DEFAULT_MAX_RETRIES=3
DEFAULT_BACKOFF_MULTIPLIER=2
DEFAULT_TIMEOUT_SECONDS=60

# =============================================================================
# MODE-SPECIFIC SETTINGS
# =============================================================================

# Metadata-Only Mode
METADATA_MODE_ENABLED=true
METADATA_MODE_DEFAULT=true

# Data Mode
DATA_MODE_ENABLED=true
DATA_MODE_REQUIRES_APPROVAL=true
DATA_MODE_MAX_SAMPLE_SIZE=10000
DATA_MODE_SAMPLE_TIMEOUT_SECONDS=30

# =============================================================================
# DOMAIN & THRESHOLDS
# =============================================================================

# Confidence Thresholds
THRESHOLD_HIGH=0.85
THRESHOLD_LOW=0.45
THRESHOLD_CRITICAL=0.95

# Domain Adaptation
DOMAIN_ADAPTATION_ENABLED=true
DOMAIN_LEARNING_RATE=0.1
DOMAIN_ADAPTATION_WINDOW=100

# =============================================================================
# NETWORK & SECURITY
# =============================================================================

# CORS Settings
CORS_ENABLED=true
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20

# TLS Settings
TLS_ENABLED=false  # Set to true in production
TLS_CERT_PATH=/path/to/cert.pem
TLS_KEY_PATH=/path/to/key.pem

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development Mode Settings
DEV_MODE=true
DEV_SKIP_AUTH=false
DEV_MOCK_LLM=false
DEV_SEED_DATA=true

# Testing
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/enmapper_test
TEST_REDIS_URL=redis://localhost:6379/1
TEST_SKIP_SLOW_TESTS=false

# Feature Flags
FEATURE_FLAGS_ENABLED=true
FEATURE_FLAGS_PROVIDER=environment  # environment | database | external

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Webhook Settings
WEBHOOKS_ENABLED=false
WEBHOOK_TIMEOUT_SECONDS=30
WEBHOOK_MAX_RETRIES=3

# External APIs
EXTERNAL_API_TIMEOUT_SECONDS=60
EXTERNAL_API_MAX_RETRIES=2

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================

# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
AUDIT_LOG_ENCRYPTION=true

# Data Retention
ARTIFACT_RETENTION_DAYS=90
LOG_RETENTION_DAYS=365
PII_LOG_RETENTION_DAYS=30

# Compliance Frameworks
COMPLIANCE_MODE=strict  # strict | permissive | audit_only
GDPR_ENABLED=true
CCPA_ENABLED=true
SOX_ENABLED=false
HIPAA_ENABLED=false
